# 機能実装: 会話パターン自動抽出

## 要件

### 機能要件

#### 会話パターン抽出
1. **パターン抽出**
   - 繰り返し出現するフレーズの検出
   - 会話パターンの分類
   - 使用頻度の計算

2. **パターン表示**
   - パターン一覧の表示
   - 使用例の表示
   - パターンの練習機能

3. **学習支援**
   - パターンに基づく練習問題生成
   - パターンの習得度追跡

### 非機能要件

- **パフォーマンス**:
  - パターン抽出: 10秒以内（100ページ）
  - パターン表示: 500ms以内

- **セキュリティ**:
  - ユーザー認証必須

## 実装指示

### Step 1: テスト設計

1. **ユニットテスト（Go）**
   - パターン抽出アルゴリズム
   - 頻度計算
   - パターン分類

2. **統合テスト（Go）**
   - パターン抽出フロー
   - パターン表示

3. **E2Eテスト（Playwright）**
   - パターン一覧の表示
   - パターン練習

テストファイルは `backend/internal/service/pattern/pattern_test.go` に配置。

### Step 2: 実装

#### 実装ファイル構造

```
backend/
├── internal/
│   └── service/
│       └── pattern/
│           ├── extractor.go         # パターン抽出
│           ├── classifier.go        # パターン分類
│           └── extractor_test.go

frontend/web/
├── components/
│   └── patterns/
│       ├── PatternList.tsx          # パターン一覧
│       ├── PatternPractice.tsx     # パターン練習
│       └── PatternList.test.tsx    # Vitestテスト
└── e2e/
    └── patterns.spec.ts            # Playwrightテスト
```

#### APIエンドポイント

```
POST /api/v1/books/{book_id}/patterns/extract
GET  /api/v1/books/{book_id}/patterns
GET  /api/v1/patterns/{pattern_id}/practice
```

## 制約事項

- 既存の `backend/internal/models/` は変更しない（新規追加のみ）

## 完了条件

- [ ] すべてのテストが通る
- [ ] BiomeJSエラーがない
- [ ] GitHub CIが通る
- [ ] ドキュメントが更新されている
